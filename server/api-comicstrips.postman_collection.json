{
	"info": {
		"_postman_id": "6167d410-700f-ad43-78fe-fb65f8ddb346",
		"name": "api-comicstrips",
		"description": "API interface for principal business services for ComicStrips NYC.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Booking Creation/Acceptance E2E",
			"description": "",
			"item": [
				{
					"name": "Create a new customer.",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "90025fda-2c37-4020-aabf-b1f7c752c58c",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    const responseData = pm.response.json();",
									"    pm.response.to.have.status(200);",
									"    pm.environment.set(\"customerId\", responseData.id);",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"Test\",\n  \"lastName\": \"Customer\",\n  \"email\": \"test@comicstrips.nyc\",\n  \"booking_id\": \"NOT-ASSIGNED\",\n  \"surveyTaken\": false,\n  \"survey_id\": \"NOT-ASSIGNED\",\n  \"billing_id\": \"NOT-ASSIGNED\",\n  \"birthdate\": 1234567890,\n  \"meta\": {\n  \t\"entity\": \"customer\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/customers",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"customers"
							]
						},
						"description": "Create a new instance of customer and persist it into the data source."
					},
					"response": []
				},
				{
					"name": "Create a new customer billing.",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0378644-9713-4681-b4bb-076ee6149677",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    const responseData = pm.response.json();",
									"    pm.response.to.have.status(200);",
									"    pm.environment.set(\"billingId\", responseData.id);",
									"    pm.environment.set(\"token\", responseData.token);",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"customer_id\": \"{{customerId}}\",\n  \"address\": \"10 Fifth Avenue\",\n  \"city\": \"New York\",\n  \"zip\": 10001,\n  \"state\": \"NY\",\n  \"aptNo\": 2,\n  \"token\": \"{{token}}\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/billing",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"billing"
							]
						},
						"description": "Creates a new billing with the customer id."
					},
					"response": []
				},
				{
					"name": "Update customer billing id.",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0ac89e37-c944-4a0f-a8fd-3affa04925ee",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"billing_id\": \"{{billingId}}\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/customers/{{customerId}}",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"customers",
								"{{customerId}}"
							]
						},
						"description": "Upate `billing_id` property on customer."
					},
					"response": []
				},
				{
					"name": "Create a new booking.",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "6a467a80-9a69-4257-bd46-9c28b82c7c71",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    const responseData = pm.response.json();",
									"    pm.response.to.have.status(200);",
									"    pm.environment.set(\"bookingId\", responseData.id);",
									"    pm.environment.set(\"offerId\", responseData.offer_id);",
									"});",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"talent_id\": \"NOT-ASSIGNED\",\n    \"customer_id\": \"{{customerId}}\",\n    \"recipient_id\": \"-L4bGgjZzBCwkrHUYB2G\",\n    \"accountManager_id\": \"NOT-ASSIGNED\",\n    \"customerEmail\": \"ptwp3gesvyjtgczz@ethereal.email\",\n    \"status\": \"PENDING\",\n    \"paymentStatus\": \"HELD\",\n    \"createdDate\": 1519431954421,\n    \"offer_id\": \"NOT-ASSIGNED\",\n    \"customizations\": \"Make it extra special.\",\n    \"fulfillmentDate\": 123456780000,\n    \"location\": {\n      \"zip\": 100001,\n      \"buildingNo\": 767,\n      \"city\": \"New York\",\n      \"contactName\": \"Tim Cook\",\n      \"contactPhone\": \"+12128675309\",\n      \"name\": \"Apple Store\",\n      \"state\": \"NY\",\n      \"street\": \"Fifth Avenue\"\n    },\n    \"products\": [\n      {\n        \"quantity\": 1,\n        \"sku\": \"sku_CNJk4bGfg2Nntu\"\n      },\n      {\n        \"quantity\": 1,\n        \"sku\": \"sku_CNQ0mN6lBly9TS\"\n      },\n      {\n        \"quantity\": 2,\n        \"sku\": \"sku_CNJr7tQdsr3xVv\"\n      },\n      {\n        \"quantity\": 1,\n        \"sku\": \"sku_CNJqRPYwKhbvUT\"\n      }\n    ],\n    \"vendors\": [\n      \"sKh7Xq6p7WV9nDBhuQPXjaoeX4v2\",\n      \"HkRgukvXxJSeIN64nEgqf6u3wCN2\",\n      \"3WDebwKtgmSA25CrYRtkA6FMIxD2\"\n    ]\n  }"
						},
						"url": {
							"raw": "http://localhost:8080/api/bookings",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"bookings"
							]
						},
						"description": "Create a new booking and persist it into the data source."
					},
					"response": []
				},
				{
					"name": "Update customer booking info.",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5e4e38cd-e3dc-462b-b98c-66bd34a0a49e",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"booking_id\": \"{{bookingId}}\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/customers/{{customerId}}",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"customers",
								"{{customerId}}"
							]
						},
						"description": "Updated `bookingId` property on customer."
					},
					"response": []
				},
				{
					"name": "Accept booking offer.",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "980bec2a-4b39-4b7d-8faf-e427a6d0fb68",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"ToCountry\": \"US\",\n    \"ToState\": \"NY\",\n    \"SmsMessageSid\": \"e0e33b62-5f9b-4b05-96c1-1581fe5e6de7\",\n    \"NumMedia\": \"0\",\n    \"ToCity\": \"\",\n    \"FromZip\": \"10167\",\n    \"SmsSid\": \"3e036da3-9f04-4510-b97e-bd0f3a5eebce\",\n    \"FromState\": \"NY\",\n    \"SmsStatus\": \"received\",\n    \"FromCity\": \"NEW YORK\",\n    \"Body\": \"ACCEPT {{offerId}}\",\n    \"FromCountry\": \"US\",\n    \"To\": \"+16467912832\",\n    \"ToZip\": \"\",\n    \"NumSegments\": \"1\",\n    \"MessageSid\": \"a7fab1ca-40ef-40fb-9d66-8696581af048\",\n    \"AccountSid\": \"879ce4f7-9a03-40ff-8d0a-29963b23d07e\",\n    \"From\": \"+12129207825\",\n    \"ApiVersion\": \"2010-04-01\"\n  }"
						},
						"url": {
							"raw": "http://localhost:8080/api/bookings/accept",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"bookings",
								"accept"
							]
						},
						"description": "Boostraps the booking acceptance process. Confirms a booking."
					},
					"response": []
				},
				{
					"name": "Delete a billing",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3a91b493-b5b6-4a2e-b93a-83c6be71a704",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://localhost:8080/api/billing/{{billingId}}",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"billing",
								"{{billingId}}"
							]
						},
						"description": "Deletes customer billing info."
					},
					"response": []
				},
				{
					"name": "Delete a booking.",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "95410939-b1f8-4b2f-857d-4741a4ebf52f",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://localhost:8080/api/bookings/{{bookingId}}",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"bookings",
								"{{bookingId}}"
							]
						},
						"description": "Delete a booking instance by {id} from the data source."
					},
					"response": []
				},
				{
					"name": "Delete a customer.",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9c3f7d6e-723c-4b5e-bd94-1d4fed91ed24",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://localhost:8080/api/customers/{{customerId}}",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"api",
								"customers",
								"{{customerId}}"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}